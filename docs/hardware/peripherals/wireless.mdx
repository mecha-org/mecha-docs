---
title: Wireless
hide_table_of_contents: true
---

import S from "@site/components/Steps";

Connect to Wireless network on Mecha device

You're having Wireless that supports 2.5/5 ghz bandwidth

You're using nmcli to interact with network wifi device onboard

### 1. List Available Device Interfaces
To see all available Wireless networks:

```
nmcli device status
```
![Image](./devstatus.png)


If you're not sure on status of your wifi device

To get status of wifi device:

```
nmcli radio wifi
```

To turn Wireless on:

```
nmcli radio wifi on
```

To turn Wireless off:

```
nmcli radio wifi off
```

### 2. List Available Wireless Networks
To see all available Wireless networks:

```
nmcli device wifi list
```
![Image](./wifilist.png)


### 3. Connect to a Wireless Network (may require sudo)
To connect to a Wireless network:

```
nmcli device wifi connect SSID-Name password wireless-password
```

Replace "SSID-Name" with the network name and "wireless-password" with the actual password.

Alternatively, if you don't want to write out your password onscreen, you can use the --ask option:

```
nmcli --ask dev wifi connect network-ssid
```

### 4. Connect to a Hidden Wireless Network
For hidden networks:

```
nmcli device wifi connect SSID-Name password wireless-password hidden yes
```

### 5. Disconnect from Wireless
To disconnect the current Wireless connection:

```
nmcli device disconnect wlan0
```

Replace "wlan0" with your wireless interface name if different.

### 6. Show Saved Connections
To list all saved connections:

```
nmcli connection show
```

### 7. Connect to a Saved Network
To connect to a previously saved network:

```
nmcli connection up id NetworkName
```

### 8. Forget a Saved Network
To remove a saved network:

```
nmcli connection delete id NetworkName
```

### 9. Get Details of Current Connection
To see details of the active connection, including password:

```
nmcli device wifi show-password
```

### 10. Modify a Connection
To change the password of a saved network:

```
nmcli connection modify id NetworkName wifi-sec.psk "new-password"
```

### 11. Create a New Connection Without Connecting
To add a new connection without immediately connecting:

```
nmcli connection add type wifi con-name "ConnectionName" ifname wlan0 ssid "SSID-Name"
nmcli connection modify "ConnectionName" wifi-sec.key-mgmt wpa-psk wifi-sec.psk "password"
```

### 12. Scan for New Networks
To refresh the list of available networks:

```
nmcli device wifi rescan
```

### 13. Wireless Internet to Ethernet

The purpose of this setup is to share a wireless internet connection over an Ethernet connection, enabling other devices to access the internet via the Ethernet network created on Mecha Comet.

This guide explains how to set up an Ethernet connection on Mecha Comet using:

- `nmcli` (NetworkManager Command Line Interface)
- Configuring Network Address Translation (NAT) using `nftables`.

    ### Preview

    <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', margin: '20px 0' }}>
    <video controls autoPlay loop muted width="340" height="340">
        <source src="https://web-assets.mecha.so/developers-v1/peripherals/wireless/wireless-to-ethernet.mp4" type="video/mp4" />
        Your browser does not support the video tag.
    </video>
    </div>

    ### Prerequisites

    - Ensure you have `nmcli` and `nftables` installed on your system.
    - You need `sudo` privileges to execute the commands.
    - Replace `wlan0` and `end0` with your actual Wireless interface and outbound network interface names.
    - Ensure your Wireless interface is connected to the internet.

    <br />
    ### Steps to Set Up Ethernet Sharing

    <S>
    <br />

    #### 1. Connect Mecha Comet to a Device with an Ethernet Port

    Physically connect the Mecha Comet to another device (e.g., a laptop or desktop) using an Ethernet cable. Ensure the Ethernet port is functional on both devices.

    #### 2. Check Existing Network Connections

    Run the following command to list the available network connections:

    ```bash
    nmcli connection show
    ```

    Identify the name of the Ethernet connection you want to modify (e.g., `Wired connection 1`).

    #### 3. Configure IPv4 Method to Shared

    Modify the Ethernet connection to use a shared IPv4 method:

    ```bash
    sudo nmcli connection modify "<connection-name>" ipv4.method shared
    ```

    **Example:**

    ```bash
    sudo nmcli connection modify "Wired connection 1" ipv4.method shared
    ```

    #### 4. Bring Up the Ethernet Connection

    Activate the Ethernet connection:

    ```bash
    sudo nmcli connection up "<connection-name>"
    ```

    **Example:**

    ```bash
    sudo nmcli connection up "Wired connection 1"
    ```

    #### 5. Configure NAT with nftables

    #### 5.1 Create a NAT Table

    Add a new NAT table:

    ```bash
    sudo nft add table ip nat
    ```

    #### 5.2 Add a NAT Chain

    Create a chain for postrouting in the NAT table:

    ```bash
    sudo nft add chain ip nat POSTROUTING { type nat hook postrouting priority 100 \; }
    ```

    #### 5.3 Add a Masquerade Rule

    Add a masquerade rule for outgoing traffic through the Wireless interface:

    ```bash
    sudo nft add rule ip nat POSTROUTING oif "wlan0" masquerade
    ```

    - Replace `wlan0` with your Wireless interface name.

    <br />
    </S>
    <br />
    
    ### Verification

    ### Check the Ethernet Connection Status

    Use the following command to verify the Ethernet connection status:

    ```bash
    nmcli device status
    ```

    ### Verify nftables Rules

    Check the NAT table rules to confirm the configuration:

    ```bash
    sudo nft list table ip nat
    ```

    ### Test Internet Connectivity on the Connected Device

    Ensure the device connected via Ethernet can access the internet. Open a browser or run a ping command to verify connectivity.

    ### Notes

    - Ensure your Ethernet adapter is functional and properly connected.
    - Replace interface names as needed for your specific setup.

    <br />
    ### Troubleshooting

    - If the Ethernet connection fails to start, ensure the cable is securely connected.
    - Verify that `nftables` is enabled and properly configured.

    By following these steps, the connected device should now have internet access via the Ethernet connection.

### 14. Ethernet to Wireless Hotspot

The purpose of this setup is to share an Ethernet internet connection over a wireless hotspot, enabling other devices to access the internet via the Wireless hotspot created on Mecha Comet.

This guide explains how to set up a wireless hotspot on Mecha Comet using:

- `nmcli` (NetworkManager Command Line Interface)
- Configuring Network Address Translation (NAT) using `nftables`.

    ### Preview

    <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', margin: '20px 0' }}>
    <video controls autoPlay loop muted width="340" height="340">
        <source src="https://web-assets.mecha.so/developers-v1/peripherals/wireless/ethernet-to-wireless.mp4" type="video/mp4" />
        Your browser does not support the video tag.
    </video>
    </div>

    ### Prerequisites

    - Ensure you have `nmcli` and `nftables` installed on your system.
    - You need `sudo` privileges to execute the commands.
    - Replace `wlan0` and `end0` with your actual Wireless interface and outbound network interface names.
    - Ensure you are connected to the Ethernet network.

    <br />
    ### Steps to Set Up the Hotspot

    <S>
    <br />
    #### 1. Create a Wireless Hotspot

    Run the following command to create a Wireless hotspot:

    ```bash
    sudo nmcli device wifi hotspot ifname <wireless-interface> con-name <connection-name> ssid <ssid-name> password "<password>"
    ```

    - Replace `<wireless-interface>` with your Wireless interface name.
    - Replace `<connection-name>` with the desired connection name.
    - Replace `<ssid-name>` with your desired hotspot name.
    - Replace `<password>` with your desired password.

    **Example:**

    ```bash
    sudo nmcli device wifi hotspot ifname wlan0 con-name comet-hotspot ssid CometHotspot password "mechacomet"
    ```

    - **ifname wlan0**: Specifies the Wireless interface (replace `wlan0` with your Wireless interface name).
    - **con-name comet-hotspot**: Sets the connection name as `comet-hotspot`.
    - **ssid CometHotspot**: Sets the SSID of the hotspot to `CometHotspot`.
    - **password "mechacomet"**: Sets the password for the hotspot.

    <br />
    #### 2. Configure IPv4 Method to Shared

    Modify the hotspot connection to use a shared IPv4 method:

    ```bash
    sudo nmcli connection modify con-name ipv4.method shared
    ```

    **Example:**

    ```bash
    sudo nmcli connection modify "comet-hotspot" ipv4.method shared
    ```

    #### 3. Bring Up the Hotspot Connection

    Activate the hotspot connection:

    ```bash
    sudo nmcli connection up con-name
    ```

    **Example:**

    ```bash
    sudo nmcli connection up "comet-hotspot"
    ```

    #### 4. Configure NAT with nftables

    #### 4.1 Create a NAT Table

    Add a new NAT table:

    ```bash
    sudo nft add table ip nat
    ```

    #### 4.2 Add a NAT Chain

    Create a chain for postrouting in the NAT table:

    ```bash
    sudo nft add chain ip nat POSTROUTING { type nat hook postrouting priority 100 \; }
    ```

    #### 4.3 Add a Masquerade Rule

    Add a masquerade rule for outgoing traffic through the outbound interface:

    ```bash
    sudo nft add rule ip nat POSTROUTING oif "end0" masquerade
    ```

    - Replace `end0` with your outbound network interface name.

    <br />
    </S>
    <br />

    ### Verification

    ### Check the Hotspot Status

    Use the following command to verify the hotspot status:

    ```bash
    nmcli device status
    ```

    ### Verify nftables Rules

    Check the NAT table rules to confirm the configuration:

    ```bash
    sudo nft list table ip nat
    ```

    ### Notes

    - Ensure your Wireless adapter supports Access Point (AP) mode.
    - Replace interface names as needed for your specific setup.
    - This setup assumes the system's outbound interface is `end0`. Adjust accordingly.

    <br />
    ### Troubleshooting

    - If the hotspot fails to start, ensure the Wireless adapter is not connected to another network.
    - Verify that `nftables` is enabled and properly configured.

    By following these steps, you should have a functioning Wireless hotspot with NAT configured.
